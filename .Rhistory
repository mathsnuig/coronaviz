"The School is pressured",
"The School is sexist",
"Decision making is transparent",
"Consultation on key decision",
"Success is celebrated",
"Promotion or internal job opportunities",
"Salary",
"Career development or funding opportunities",
"Office space",
"Access to admin support",
"Unfavourably treated because of gender",
"Others unfavourably treated because of gender",
"Unfavourably treated for other characteristics",
"Others unfavourably treated for other characteristics",
"Would report unfavourable treatment",
"Social events held in School",
"Interested in attending social events in School",
"Your workload",
"Excess work is appreciated",
"Happy with work/life balance",
"School has clear workload allocation model",
"Current teaching and learning workload",
"Current research and scholarship workload",
"Current student support workload",
"Current admin workload",
"Current outreach workload",
"Teaching and learning importance",
"Research and scholarship importance",
"Student support importance",
"Admin task importance",
"Outreach importance",
"Recognised for teaching",
"Recgonised for admin",
"Recognised for research",
"Recognised for outreach",
"I work flexibly",
"Flexible working supported by School",
"Working part-time would harm career",
"Working flexibly would harm career",
"Meetings held at suitable times",
"Teaching timetable affects caring responsibilities",
"Aware of Uni promotion/progression policy",
"Promotion/progression policy is transparent and fair",
"Received School support for promotion/progression",
"I have applied for promotion/progression",
"School supports conference attendance",
"Do you have a mentor?",
"Ever taken sabbatical/career break?",
"Aspirations changed since joining NUI Galway",
"Taken any leave?",
"Any problems returning from leave?",
"Taking leave would damage my career",
"Taking leave has damaged my career")
# # print out the options - some have no responses of e.g. strongly disagree
# for(i in 1:length(cat_vars)){
#  print(i);print(levels(as[[cat_vars[i]]]))
#  }
for(i in c(8,9,34)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,1,3)])
}
for(i in c(10,14,15,41)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,1,4)])
}
for(i in c(11,12,31,32,51)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,2,3,1,4)])
}
for(i in c(13,50)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,2,3,1)])
}
for(i in c(16)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,4,1)])
}
for(i in c(17,29)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,2,1)])
}
for(i in c(18)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,1)])
}
for(i in c(19)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,3,2,1)])
}
for(i in c(27)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,2,4,3)])
}
for(i in c(30)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,4,2,5,1)])
}
for(i in c(31)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,2,3,1,4)])
}
for(i in c(35)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,4,5,1)])
}
for(i in c(33,36,37)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,1,3,4)])
}
for(i in c(38,39)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,1,4,2)])
}
for(i in c(40)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,5,2,6,3,1)])
}
for(i in c(42)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,1,5,2)])
}
for(i in c(43,45,49)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,1,5,4)])
}
for(i in c(44)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(7,3,4,2,6,5,1)])
}
for(i in c(46)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,2,5,4,1)])
}
for(i in c(47)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,4,1)])
}
for(i in c(48)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,2,5,1)])
}
for(i in c(52,53,56,57)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,1,2)])
}
for(i in c(54,55)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,3,4,2)])
}
for(i in c(58)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,2,4,5,3)])
}
for(i in c(60)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,4,3,1)])
}
for(i in c(61,62)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,4,3,1)])
}
for(i in c(63)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,3,4,2,1)])
}
for(i in c(64)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,4,2,5,1)])
}
# select out qualitative variables, i.e. which column numbers have text responses?
comment_vars <- names(as)[c(34,53,60,65,66,67,70,73,78:81)]
# rename these variables
comment_names <- c("Comments on School workplace culture",
"Comments on workload",
"Comments on flexible working",
"Reason for not applying for promotion/progression",
"Comments on promotions/progression",
"Activities encouraged by School",
"Member of",
"Comments on career development",
"Comments on leave",
"How can School promote equality?",
"Suggestions for improvements to culture",
"Suggestions for improvements to career development")
i=5
as %>% filter(What.is.your.role.=="Professional/Administrative/Technical staff")
levels(as$What.is.your.role.)
table(as$What.is.your.gender.,as$What.is.your.role.)
# loop over categorical vars
for(i in 2:length(cat_vars)){
# var name as header
cat('####', cat_names[i], '\n')
# table of counts, by gender
pander(table(as$What.is.your.gender.,as[[cat_vars[i]]]))
# table of percentages, be gender
pander(100*prop.table(table(as$What.is.your.gender.,as[[cat_vars[i]]]),margin = 1))
# table of counts, by role
pander(table(as$What.is.your.role.,as[[cat_vars[i]]]))
# table of percentages, by role
pander(100*prop.table(table(as$What.is.your.role.,as[[cat_vars[i]]]),margin = 1))
}
View(as)
# empty workspace
rm(list=ls())
# load up required packages
library(tidyverse)
library(knitr)
library(pander)
# set knitr and pander options
opts_chunk$set(echo = FALSE, fig.height = 5, fig.width = 4)
panderOptions('knitr.auto.asis', FALSE)
# angle of label ticks
deg <- 75
# read in data
as <- read.csv("School of Mathematics, Statistics and Applied Mathematics Athena SWAN Staff Survey(1-37).csv", fileEncoding="latin1")
# loop over qualitative vars
for(i in 1:length(comment_vars)){
cat('\n')
# var name as header
cat('###', comment_names[i], '\n')
# print the comment with separation
pander(paste((as[[comment_vars[i]]][as[[comment_vars[i]]]!=""]), collapse = "  ;   ,   ;  "))
cat('\n')
}
# empty workspace
rm(list=ls())
# load up required packages
library(tidyverse)
library(knitr)
library(pander)
# set knitr and pander options
opts_chunk$set(echo = FALSE, fig.height = 5, fig.width = 4)
panderOptions('knitr.auto.asis', FALSE)
# angle of label ticks
deg <- 75
# read in data
as <- read.csv("School of Mathematics, Statistics and Applied Mathematics Athena SWAN Staff Survey(1-37).csv", fileEncoding="latin1")
#
# select out variables which can be plotted. these are the column numbers with fewer than 8 unique responses
#
cat_vars <- names(as)[c(6:33,35:52,54:59,61:64,68,69,71,72,74:77)]
# rename these variables, to appear on axis labels
cat_names <- c("Gender",
"Age",
"Length of service",
"My role",
"My employment status",
"Part/full time",
"Caring responsibilities",
"The School is supportive",
"The School is inclusive",
"The School is competitive",
"The School is cliquey",
"The School is pressured",
"The School is sexist",
"Decision making is transparent",
"Consultation on key decision",
"Success is celebrated",
"Promotion or internal job opportunities",
"Salary",
"Career development or funding opportunities",
"Office space",
"Access to admin support",
"Unfavourably treated because of gender",
"Others unfavourably treated because of gender",
"Unfavourably treated for other characteristics",
"Others unfavourably treated for other characteristics",
"Would report unfavourable treatment",
"Social events held in School",
"Interested in attending social events in School",
"Your workload",
"Excess work is appreciated",
"Happy with work/life balance",
"School has clear workload allocation model",
"Current teaching and learning workload",
"Current research and scholarship workload",
"Current student support workload",
"Current admin workload",
"Current outreach workload",
"Teaching and learning importance",
"Research and scholarship importance",
"Student support importance",
"Admin task importance",
"Outreach importance",
"Recognised for teaching",
"Recgonised for admin",
"Recognised for research",
"Recognised for outreach",
"I work flexibly",
"Flexible working supported by School",
"Working part-time would harm career",
"Working flexibly would harm career",
"Meetings held at suitable times",
"Teaching timetable affects caring responsibilities",
"Aware of Uni promotion/progression policy",
"Promotion/progression policy is transparent and fair",
"Received School support for promotion/progression",
"I have applied for promotion/progression",
"School supports conference attendance",
"Do you have a mentor?",
"Ever taken sabbatical/career break?",
"Aspirations changed since joining NUI Galway",
"Taken any leave?",
"Any problems returning from leave?",
"Taking leave would damage my career",
"Taking leave has damaged my career")
# # print out the options - some have no responses of e.g. strongly disagree
# for(i in 1:length(cat_vars)){
#  print(i);print(levels(as[[cat_vars[i]]]))
#  }
for(i in c(8,9,34)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,1,3)])
}
for(i in c(10,14,15,41)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,1,4)])
}
for(i in c(11,12,31,32,51)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,2,3,1,4)])
}
for(i in c(13,50)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,2,3,1)])
}
for(i in c(16)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,4,1)])
}
for(i in c(17,29)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,2,1)])
}
for(i in c(18)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,1)])
}
for(i in c(19)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,3,2,1)])
}
for(i in c(27)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,2,4,3)])
}
for(i in c(30)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,4,2,5,1)])
}
for(i in c(31)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,2,3,1,4)])
}
for(i in c(35)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,4,5,1)])
}
for(i in c(33,36,37)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,1,3,4)])
}
for(i in c(38,39)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,1,4,2)])
}
for(i in c(40)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(4,5,2,6,3,1)])
}
for(i in c(42)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,1,5,2)])
}
for(i in c(43,45,49)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,3,1,5,4)])
}
for(i in c(44)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(7,3,4,2,6,5,1)])
}
for(i in c(46)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,2,5,4,1)])
}
for(i in c(47)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,2,4,1)])
}
for(i in c(48)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,4,2,5,1)])
}
for(i in c(52,53,56,57)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(3,1,2)])
}
for(i in c(54,55)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,3,4,2)])
}
for(i in c(58)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(1,2,4,5,3)])
}
for(i in c(60)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,4,3,1)])
}
for(i in c(61,62)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(2,4,3,1)])
}
for(i in c(63)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(5,3,4,2,1)])
}
for(i in c(64)){
as[[cat_vars[i]]] <- factor(as[[cat_vars[i]]], levels(as[[cat_vars[i]]])[c(6,3,4,2,5,1)])
}
# select out qualitative variables, i.e. which column numbers have text responses?
comment_vars <- names(as)[c(34,53,60,65,66,67,70,73,78:81)]
# rename these variables
comment_names <- c("Comments on School workplace culture",
"Comments on workload",
"Comments on flexible working",
"Reason for not applying for promotion/progression",
"Comments on promotions/progression",
"Activities encouraged by School",
"Member of",
"Comments on career development",
"Comments on leave",
"How can School promote equality?",
"Suggestions for improvements to culture",
"Suggestions for improvements to career development")
# loop over qualitative vars
for(i in 1:length(comment_vars)){
cat('\n')
# var name as header
cat('###', comment_names[i], '\n')
# print the comment with separation
pander(paste((as[[comment_vars[i]]][as[[comment_vars[i]]]!=""]), collapse = "  ;   ,   ;  "))
cat('\n')
}
# loop over qualitative vars
for(i in 1:length(comment_vars)){
cat('\n')
# var name as header
cat('###', comment_names[i], '\n')
# print the comment with separation
pander(paste((as[[comment_vars[i]]][as[[comment_vars[i]]]!=""]), collapse = "\n"))
cat('\n')
}
# loop over qualitative vars
for(i in 1:length(comment_vars)){
cat('\n')
# var name as header
cat('###', comment_names[i], '\n')
# print the comment with separation
pander(paste((as[[comment_vars[i]]][as[[comment_vars[i]]]!=""]), collapse = "\n\n"))
cat('\n')
}
x <- seq(0,10,length.out = 50000)
V <- c(rnorm(20000, 0,0.001),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.5))
plot(x,V)
V <- c(rnorm(20000, 0,0.001),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.5),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.001))
plot(x,V)
plot(x,V)
plot(x,V,type='l')
x <- seq(0,10,length.out = 50000)
V <- c(rnorm(20000, 0,0.006),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.5),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.004))
plot(x,V,type='l')
V <- c(rnorm(20000, 0,0.006),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.3),
rnorm(10000, 0,0.01),
rnorm(5000, 0,0.004))
plot(x,V,type='l')
x <- seq(0,10,length.out = 5000)
V <- c(rnorm(2000, 0,0.006),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.3),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.004))
plot(x,V,type='l')
x <- seq(0,5,length.out = 5000)
V <- c(rnorm(2000, 0,0.006),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.3),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.004))
plot(x,V,type='l')
df <- data.frame(t = x, V=V)
library(ggplot2)
ggplot(df, aes(x=t,y=V)) + geom_line() + theme_bw()
x <- rep(seq(0,5,length.out = 5000),2)
length(c(rnorm(1050, 0,0.006),
rnorm(515, 0,0.01),
rnorm(485, 0,0.3),
rnorm(530, 0,0.01),
rnorm(220, 0,0.004),
rnorm(450, 0,0.01),
rnorm(250, 0,0.33),
rnorm(500, 0,0.01),
rnorm(500, 0,0.004)))
length(       c(rnorm(1050, 0,0.006),
rnorm(515, 0,0.01),
rnorm(485, 0,0.3),
rnorm(530, 0,0.01),
rnorm(320, 0,0.24),
rnorm(550, 0,0.01),
rnorm(350, 0,0.33),
rnorm(600, 0,0.01),
rnorm(500, 0,0.004)))
V <- c(rnorm(2000, 0,0.006),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.3),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.004),
rnorm(1050, 0,0.006),
rnorm(615, 0,0.01),
rnorm(485, 0,0.3),
rnorm(530, 0,0.01),
rnorm(320, 0,0.24),
rnorm(556, 0,0.01),
rnorm(344, 0,0.33),
rnorm(693, 0,0.01),
rnorm(497, 0,0.004))
x <- rep(seq(0,5,length.out = 5000),2)
V <- c(rnorm(2000, 0,0.006),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.3),
rnorm(1000, 0,0.01),
rnorm(500, 0,0.004),
rnorm(1050, 0,0.006),
rnorm(615, 0,0.01),
rnorm(485, 0,0.3),
rnorm(530, 0,0.01),
rnorm(320, 0,0.24),
rnorm(556, 0,0.01),
rnorm(254, 0,0.33),
rnorm(693, 0,0.01),
rnorm(497, 0,0.004))
df <- data.frame(t = x, V=V)
library(ggplot2)
ggplot(df, aes(x=t,y=V)) + geom_line() + theme_bw()
id <- c(rep("control",5000),rep("case",5000))
df <- data.frame(t = x, V=V, id=id)
ggplot(df, aes(x=t,y=V)) + geom_line() + theme_bw() + facet_grid(~id)
shiny::runApp('covid/coronaviz')
runApp('covid/coronaviz/mobileapp.R')
shiny::runApp('covid/coronaviz')
runApp('covid/coronaviz')
runApp('covid/coronaviz/mobileapp.R')
runApp('covid/coronaviz')
runApp('covid/coronaviz/mobileapp.R')
