county == "Westmeath" ~ -7.4653,
county == "Wicklow" ~ -6.0446,
county == "Galway" ~ -9.0568,
county == "Limerick" ~ -8.6267,
county == "Cork" ~ -8.4756,
county == "Dublin" ~ -6.2603),
lat = case_when(county == "Carlow" ~ 52.8408318,
county == "Cavan" ~ 53.9908295,
county == "Clare" ~ 52.9045,
county == "Donegal" ~ 54.6549,
county == "Kildare" ~ 53.1561089,
county == "Kilkenny" ~ 52.6541,
county == "Laois" ~ 52.9943,
county == "Leitrim" ~ 54.1247,
county == "Longford" ~ 53.7276,
county == "Louth" ~ 53.9252,
county == "Mayo" ~ 54.0153,
county == "Meath" ~ 53.6055,
county == "Monaghan" ~ 54.2492,
county == "Offaly" ~ 53.2357,
county == "Roscommon" ~ 53.6276,
county == "Sligo" ~ 54.2766,
county == "Tipperary" ~ 52.4738,
county == "Wexford" ~ 52.3369,
county == "Kerry" ~ 52.1545,
county == "Waterford" ~ 52.2593,
county == "Westmeath" ~ 53.5345,
county == "Wicklow" ~ 52.9808,
county == "Galway" ~ 53.2707,
county == "Limerick" ~ 52.6638,
county == "Cork" ~ 51.8985,
county == "Dublin" ~ 53.3498),
province = case_when(county=="Carlow"|county=="Dublin"|
county=="Kildare"|county=="Kilkenny"|
county=="Laois"|county=="Longford"|
county=="Louth"|county=="Meath"|
county=="Offaly"|county=="Westmeath"|
county=="Wexford"|county=="Wicklow" ~ "Leinster",
county=="Clare"|county=="Cork"|
county=="Kerry"|county=="Limerick"|
county=="Tipperary"|county=="Waterford" ~ "Munster",
county=="Galway"|county=="Leitrim"|
county=="Mayo"|county=="Roscommon"|
county=="Sligo" ~ "Connacht",
county=="Donegal"|county=="Cavan"|
county=="Monaghan" ~ "Ulster (ROI)"),
Total_cases_per100k = 1e5*ncases/pop) %>%
filter(date >= as.Date(input$countydates[1],format = "%d/%m/%Y")) %>%
filter(date <= as.Date(input$countydates[2],format = "%d/%m/%Y")) %>%
group_by(county) %>%
mutate(New_cases = c(NA,diff(ncases)),
New_cases = ifelse(New_cases < 0, 0, New_cases),
Period_cases = max(ncases)-min(ncases),
Period_cases_per100k = round(1e5*Total_cases/pop,0),
Period_length = as.Date(input$countydates[2],format = "%d/%m/%Y") -
as.Date(input$countydates[1],format = "%d/%m/%Y"))
input <- data.frame(countydates = c("23/07/2020", "06/08/2020"))
dat <- read.csv("data/corona_county.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y"),
ncases = as.character(ncase),
ncases = ifelse(ncases == "< = 5","5",ncases),
ncases = as.numeric(ncases),
pop = case_when(county == "Carlow" ~ 24272,
county == "Cavan" ~ 76176,
county == "Clare" ~ 118817,
county == "Donegal" ~159192,
county == "Kildare" ~ 222504,
county == "Kilkenny" ~ 99232,
county == "Laois" ~ 84697,
county == "Leitrim" ~32044,
county == "Longford" ~ 40873,
county == "Louth" ~ 128884,
county == "Mayo" ~ 130507,
county == "Meath" ~ 195044,
county == "Monaghan" ~61386,
county == "Offaly" ~ 77961,
county == "Roscommon" ~ 64544,
county == "Sligo" ~ 65535,
county == "Tipperary" ~ 159553,
county == "Wexford" ~ 149722,
county == "Kerry" ~ 147707,
county == "Waterford" ~ 116176,
county == "Westmeath" ~ 88770,
county == "Wicklow" ~ 142425,
county == "Galway" ~ 258058,
county == "Limerick" ~ 194899,
county == "Cork" ~ 542868,
county == "Dublin" ~ 1347359),
long = case_when(county == "Carlow" ~ -6.9261098,
county == "Cavan" ~ -7.3605599,
county == "Clare" ~ -8.9811,
county == "Donegal" ~ -8.1041,
county == "Kildare" ~ -6.9144402,
county == "Kilkenny" ~ -7.2448,
county == "Laois" ~ -7.3323,
county == "Leitrim" ~ -8.0020,
county == "Longford" ~ -7.7933,
county == "Louth" ~ -6.4889,
county == "Mayo" ~ -9.4289,
county == "Meath" ~ -6.6564,
county == "Monaghan" ~ -6.9683,
county == "Offaly" ~ -7.7122,
county == "Roscommon" ~ -8.1891,
county == "Sligo" ~ -8.4761,
county == "Tipperary" ~ -8.1619,
county == "Wexford" ~ -6.4633,
county == "Kerry" ~ -9.5669,
county == "Waterford" ~ -7.1101,
county == "Westmeath" ~ -7.4653,
county == "Wicklow" ~ -6.0446,
county == "Galway" ~ -9.0568,
county == "Limerick" ~ -8.6267,
county == "Cork" ~ -8.4756,
county == "Dublin" ~ -6.2603),
lat = case_when(county == "Carlow" ~ 52.8408318,
county == "Cavan" ~ 53.9908295,
county == "Clare" ~ 52.9045,
county == "Donegal" ~ 54.6549,
county == "Kildare" ~ 53.1561089,
county == "Kilkenny" ~ 52.6541,
county == "Laois" ~ 52.9943,
county == "Leitrim" ~ 54.1247,
county == "Longford" ~ 53.7276,
county == "Louth" ~ 53.9252,
county == "Mayo" ~ 54.0153,
county == "Meath" ~ 53.6055,
county == "Monaghan" ~ 54.2492,
county == "Offaly" ~ 53.2357,
county == "Roscommon" ~ 53.6276,
county == "Sligo" ~ 54.2766,
county == "Tipperary" ~ 52.4738,
county == "Wexford" ~ 52.3369,
county == "Kerry" ~ 52.1545,
county == "Waterford" ~ 52.2593,
county == "Westmeath" ~ 53.5345,
county == "Wicklow" ~ 52.9808,
county == "Galway" ~ 53.2707,
county == "Limerick" ~ 52.6638,
county == "Cork" ~ 51.8985,
county == "Dublin" ~ 53.3498),
province = case_when(county=="Carlow"|county=="Dublin"|
county=="Kildare"|county=="Kilkenny"|
county=="Laois"|county=="Longford"|
county=="Louth"|county=="Meath"|
county=="Offaly"|county=="Westmeath"|
county=="Wexford"|county=="Wicklow" ~ "Leinster",
county=="Clare"|county=="Cork"|
county=="Kerry"|county=="Limerick"|
county=="Tipperary"|county=="Waterford" ~ "Munster",
county=="Galway"|county=="Leitrim"|
county=="Mayo"|county=="Roscommon"|
county=="Sligo" ~ "Connacht",
county=="Donegal"|county=="Cavan"|
county=="Monaghan" ~ "Ulster (ROI)"),
Total_cases_per100k = 1e5*ncases/pop) %>%
filter(date >= as.Date(input$countydates[1],format = "%d/%m/%Y")) %>%
filter(date <= as.Date(input$countydates[2],format = "%d/%m/%Y")) %>%
group_by(county) %>%
mutate(New_cases = c(NA,diff(ncases)),
New_cases = ifelse(New_cases < 0, 0, New_cases),
Period_cases = max(ncases)-min(ncases),
Period_cases_per100k = round(1e5*Period_cases/pop,0),
Period_length = as.Date(input$countydates[2],format = "%d/%m/%Y") -
as.Date(input$countydates[1],format = "%d/%m/%Y"))
View(dat)
runApp('covid/coronaviz')
runApp('covid/coronaviz')
dat$county[5]
runApp('covid/coronaviz')
runApp('covid/coronaviz')
runApp('covid/coronaviz')
runApp('covid/coronaviz/mobileapp.R')
x=1:100
quantile(x,probs=0.1)
shiny::runApp('covid/coronaviz')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(DT)
rm(list=ls())
dat <- read.csv("data/corona_county.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y"),
ncases = as.character(ncase),
ncases = ifelse(ncases == "< = 5","5",ncases),
ncases = as.numeric(ncases),
pop = case_when(county == "Carlow" ~ 24272,
county == "Cavan" ~ 76176,
county == "Clare" ~ 118817,
county == "Donegal" ~159192,
county == "Kildare" ~ 222504,
county == "Kilkenny" ~ 99232,
county == "Laois" ~ 84697,
county == "Leitrim" ~32044,
county == "Longford" ~ 40873,
county == "Louth" ~ 128884,
county == "Mayo" ~ 130507,
county == "Meath" ~ 195044,
county == "Monaghan" ~61386,
county == "Offaly" ~ 77961,
county == "Roscommon" ~ 64544,
county == "Sligo" ~ 65535,
county == "Tipperary" ~ 159553,
county == "Wexford" ~ 149722,
county == "Kerry" ~ 147707,
county == "Waterford" ~ 116176,
county == "Westmeath" ~ 88770,
county == "Wicklow" ~ 142425,
county == "Galway" ~ 258058,
county == "Limerick" ~ 194899,
county == "Cork" ~ 542868,
county == "Dublin" ~ 1347359),
long = case_when(county == "Carlow" ~ -6.9261098,
county == "Cavan" ~ -7.3605599,
county == "Clare" ~ -8.9811,
county == "Donegal" ~ -8.1041,
county == "Kildare" ~ -6.9144402,
county == "Kilkenny" ~ -7.2448,
county == "Laois" ~ -7.3323,
county == "Leitrim" ~ -8.0020,
county == "Longford" ~ -7.7933,
county == "Louth" ~ -6.4889,
county == "Mayo" ~ -9.4289,
county == "Meath" ~ -6.6564,
county == "Monaghan" ~ -6.9683,
county == "Offaly" ~ -7.7122,
county == "Roscommon" ~ -8.1891,
county == "Sligo" ~ -8.4761,
county == "Tipperary" ~ -8.1619,
county == "Wexford" ~ -6.4633,
county == "Kerry" ~ -9.5669,
county == "Waterford" ~ -7.1101,
county == "Westmeath" ~ -7.4653,
county == "Wicklow" ~ -6.0446,
county == "Galway" ~ -9.0568,
county == "Limerick" ~ -8.6267,
county == "Cork" ~ -8.4756,
county == "Dublin" ~ -6.2603),
lat = case_when(county == "Carlow" ~ 52.8408318,
county == "Cavan" ~ 53.9908295,
county == "Clare" ~ 52.9045,
county == "Donegal" ~ 54.6549,
county == "Kildare" ~ 53.1561089,
county == "Kilkenny" ~ 52.6541,
county == "Laois" ~ 52.9943,
county == "Leitrim" ~ 54.1247,
county == "Longford" ~ 53.7276,
county == "Louth" ~ 53.9252,
county == "Mayo" ~ 54.0153,
county == "Meath" ~ 53.6055,
county == "Monaghan" ~ 54.2492,
county == "Offaly" ~ 53.2357,
county == "Roscommon" ~ 53.6276,
county == "Sligo" ~ 54.2766,
county == "Tipperary" ~ 52.4738,
county == "Wexford" ~ 52.3369,
county == "Kerry" ~ 52.1545,
county == "Waterford" ~ 52.2593,
county == "Westmeath" ~ 53.5345,
county == "Wicklow" ~ 52.9808,
county == "Galway" ~ 53.2707,
county == "Limerick" ~ 52.6638,
county == "Cork" ~ 51.8985,
county == "Dublin" ~ 53.3498),
province = case_when(county=="Carlow"|county=="Dublin"|
county=="Kildare"|county=="Kilkenny"|
county=="Laois"|county=="Longford"|
county=="Louth"|county=="Meath"|
county=="Offaly"|county=="Westmeath"|
county=="Wexford"|county=="Wicklow" ~ "Leinster",
county=="Clare"|county=="Cork"|
county=="Kerry"|county=="Limerick"|
county=="Tipperary"|county=="Waterford" ~ "Munster",
county=="Galway"|county=="Leitrim"|
county=="Mayo"|county=="Roscommon"|
county=="Sligo" ~ "Connacht",
county=="Donegal"|county=="Cavan"|
county=="Monaghan" ~ "Ulster (ROI)"),
Total_cases_per100k = 1e5*ncases/pop) %>%
filter(date >= as.Date(input$countydates[1],format = "%d/%m/%Y")) %>%
filter(date <= as.Date(input$countydates[2],format = "%d/%m/%Y")) %>%
group_by(county) %>%
mutate(New_cases = c(NA,diff(ncases)),
New_cases = ifelse(New_cases < 0, 0, New_cases),
Period_cases = max(ncases)-min(ncases),
Period_cases_per100k = round(1e5*Period_cases/pop,0),
Period_length = as.Date(input$countydates[2],format = "%d/%m/%Y") -
as.Date(input$countydates[1],format = "%d/%m/%Y"))
input <- data.frame(countydates = c("23/07/2020", "06/08/2020"))
input <- data.frame(countydates = c("23/07/2020", "06/08/2020"))
dat <- read.csv("data/corona_county.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y"),
ncases = as.character(ncase),
ncases = ifelse(ncases == "< = 5","5",ncases),
ncases = as.numeric(ncases),
pop = case_when(county == "Carlow" ~ 24272,
county == "Cavan" ~ 76176,
county == "Clare" ~ 118817,
county == "Donegal" ~159192,
county == "Kildare" ~ 222504,
county == "Kilkenny" ~ 99232,
county == "Laois" ~ 84697,
county == "Leitrim" ~32044,
county == "Longford" ~ 40873,
county == "Louth" ~ 128884,
county == "Mayo" ~ 130507,
county == "Meath" ~ 195044,
county == "Monaghan" ~61386,
county == "Offaly" ~ 77961,
county == "Roscommon" ~ 64544,
county == "Sligo" ~ 65535,
county == "Tipperary" ~ 159553,
county == "Wexford" ~ 149722,
county == "Kerry" ~ 147707,
county == "Waterford" ~ 116176,
county == "Westmeath" ~ 88770,
county == "Wicklow" ~ 142425,
county == "Galway" ~ 258058,
county == "Limerick" ~ 194899,
county == "Cork" ~ 542868,
county == "Dublin" ~ 1347359),
long = case_when(county == "Carlow" ~ -6.9261098,
county == "Cavan" ~ -7.3605599,
county == "Clare" ~ -8.9811,
county == "Donegal" ~ -8.1041,
county == "Kildare" ~ -6.9144402,
county == "Kilkenny" ~ -7.2448,
county == "Laois" ~ -7.3323,
county == "Leitrim" ~ -8.0020,
county == "Longford" ~ -7.7933,
county == "Louth" ~ -6.4889,
county == "Mayo" ~ -9.4289,
county == "Meath" ~ -6.6564,
county == "Monaghan" ~ -6.9683,
county == "Offaly" ~ -7.7122,
county == "Roscommon" ~ -8.1891,
county == "Sligo" ~ -8.4761,
county == "Tipperary" ~ -8.1619,
county == "Wexford" ~ -6.4633,
county == "Kerry" ~ -9.5669,
county == "Waterford" ~ -7.1101,
county == "Westmeath" ~ -7.4653,
county == "Wicklow" ~ -6.0446,
county == "Galway" ~ -9.0568,
county == "Limerick" ~ -8.6267,
county == "Cork" ~ -8.4756,
county == "Dublin" ~ -6.2603),
lat = case_when(county == "Carlow" ~ 52.8408318,
county == "Cavan" ~ 53.9908295,
county == "Clare" ~ 52.9045,
county == "Donegal" ~ 54.6549,
county == "Kildare" ~ 53.1561089,
county == "Kilkenny" ~ 52.6541,
county == "Laois" ~ 52.9943,
county == "Leitrim" ~ 54.1247,
county == "Longford" ~ 53.7276,
county == "Louth" ~ 53.9252,
county == "Mayo" ~ 54.0153,
county == "Meath" ~ 53.6055,
county == "Monaghan" ~ 54.2492,
county == "Offaly" ~ 53.2357,
county == "Roscommon" ~ 53.6276,
county == "Sligo" ~ 54.2766,
county == "Tipperary" ~ 52.4738,
county == "Wexford" ~ 52.3369,
county == "Kerry" ~ 52.1545,
county == "Waterford" ~ 52.2593,
county == "Westmeath" ~ 53.5345,
county == "Wicklow" ~ 52.9808,
county == "Galway" ~ 53.2707,
county == "Limerick" ~ 52.6638,
county == "Cork" ~ 51.8985,
county == "Dublin" ~ 53.3498),
province = case_when(county=="Carlow"|county=="Dublin"|
county=="Kildare"|county=="Kilkenny"|
county=="Laois"|county=="Longford"|
county=="Louth"|county=="Meath"|
county=="Offaly"|county=="Westmeath"|
county=="Wexford"|county=="Wicklow" ~ "Leinster",
county=="Clare"|county=="Cork"|
county=="Kerry"|county=="Limerick"|
county=="Tipperary"|county=="Waterford" ~ "Munster",
county=="Galway"|county=="Leitrim"|
county=="Mayo"|county=="Roscommon"|
county=="Sligo" ~ "Connacht",
county=="Donegal"|county=="Cavan"|
county=="Monaghan" ~ "Ulster (ROI)"),
Total_cases_per100k = 1e5*ncases/pop) %>%
filter(date >= as.Date(input$countydates[1],format = "%d/%m/%Y")) %>%
filter(date <= as.Date(input$countydates[2],format = "%d/%m/%Y")) %>%
group_by(county) %>%
mutate(New_cases = c(NA,diff(ncases)),
New_cases = ifelse(New_cases < 0, 0, New_cases),
Period_cases = max(ncases)-min(ncases),
Period_cases_per100k = round(1e5*Period_cases/pop,0),
Period_length = as.Date(input$countydates[2],format = "%d/%m/%Y") -
as.Date(input$countydates[1],format = "%d/%m/%Y"))
dat %>%         mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] ~ "1",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] ~ "2",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "3",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "4"))
View(dat)
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] ~ "1",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] ~ "2",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "3",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "4"))
View(dat)
quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))
quantile(unique(dat$Period_cases_per100k),probs=c(0.1,0.5,0.9))
quantile(unique(dat$Period_cases_per100k),probs=c(0.1,0.5,0.9))[1]
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = as.factor(ifelse(Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1], 1,
ifelse(Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2], 2,
ifelse(Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3], 3,4)))))
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] ~ "1",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[1] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] ~ "2",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[2] &
Period_cases_per100k < quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "3",
Period_cases_per100k >= quantile(unique(Period_cases_per100k),probs=c(0.1,0.5,0.9))[3] ~ "4"))
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[1] ~ "1",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[1] &
Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[2] ~ "2",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[2] &
Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[3] ~ "3",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[3] ~ "4"))
warnings()
View(dat)
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.1)) ~ "1",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.1)) &
Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.5)) ~ "2",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.5)) &
Period_cases_per100k < quantile(Period_cases_per100k,probs=c(0.9)) ~ "3",
Period_cases_per100k >= quantile(Period_cases_per100k,probs=c(0.9)) ~ "4"))
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < 1.5 ~ "1",
Period_cases_per100k >= 1.5 &
Period_cases_per100k < 8.5 ~ "2",
Period_cases_per100k >= 8.5 &
Period_cases_per100k < 55.5 ~ "3",
Period_cases_per100k >= 55.5 ~ "4"))
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[1]) ~ "1",
Period_cases_per100k >= as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[1]) &
Period_cases_per100k < as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[2]) ~ "2",
Period_cases_per100k >= as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[2]) &
Period_cases_per100k < as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[3]) ~ "3",
Period_cases_per100k >= as.numeric(quantile(Period_cases_per100k,probs=c(0.1,0.5,0.9))[3]) ~ "4"))
cutoff <- quantile(dat$Period_cases_per100k, probs = c(0.1,0.5,0.9))
dat = dat %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(case_groups = case_when(Period_cases_per100k < cutoff[1] ~ "1",
Period_cases_per100k >=  cutoff[1] &
Period_cases_per100k < cutoff[2] ~ "2",
Period_cases_per100k >= cutoff[2] &
Period_cases_per100k < cutoff[3] ~ "3",
Period_cases_per100k >= cutoff[3] ~ "4"))
View(dat)
runApp('covid/coronaviz')
shiny::runApp('covid/coronaviz')
as.Date(daily_date,format="%d/%m/%Y")-7
daily_date = "10/08/2020"
as.Date(daily_date,format="%d/%m/%Y")-7
runApp('covid/coronaviz')
runApp('covid/coronaviz')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(DT)
rm(list=ls())
dat <- read.csv("data/corona_ireland.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(pop = case_when(country=="ireland"~4922000)) %>%
filter(area!="north")  %>%
filter(country == "ireland")
dat <- dat %>%
filter(date > as.Date(daily_date,format="%d/%m/%Y")-7)
daily_date = "10/08/2020"
dat <- dat %>%
filter(date > as.Date(daily_date,format="%d/%m/%Y")-7)
as.Date(daily_date,format="%d/%m/%Y")-7
dat <- read.csv("data/corona_ireland.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y")) %>%
mutate(pop = case_when(country=="ireland"~4922000)) %>%
filter(area!="north")  %>%
filter(country == "ireland")
daily_date = "10/08/2020"
dat <- dat %>%
filter(date > as.Date(daily_date,format="%d/%m/%Y")-7)
View(dat)
paste0(round(1e5*sum(dat$ncase,na.rm=TRUE)/dat$pop,1))
sum(dat$ncase,na.rm=TRUE)
1e5*sum(dat$ncase,na.rm=TRUE)
paste0(round(1e5*sum(dat$ncase,na.rm=TRUE)/dat$pop[1],1))
runApp('covid/coronaviz')
