labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, academic, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, tech, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, tech, count
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, tech, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, tech, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, research, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, research, count
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, research, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, research, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
}
# loop over categorical variables
for(i in 2:length(cat_vars)){
# female, academic, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, academic, count
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, academic, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, academic, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, tech, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, tech, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, research, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, research, count
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, research, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, research, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
}
i=1
i=2
# male, academic, %
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
g
# female, tech, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Professional/Administrative/Technical staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
g
# female, research, count
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# male, research, count
g <- as %>%
filter(What.is.your.gender. == "Male" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# female, research, %
g <- as %>%
filter(What.is.your.gender. == "Female" & What.is.your.role. == "Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender. + What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# loop over categorical variables
for(i in 1:length(cat_vars)){
# variable name as header
cat('####', cat_names[i], '\n')
# table of counts
pander(table(as[[cat_vars[i]]]))
# table of percentages
pander(100*prop.table(table(as[[cat_vars[i]]])))
}
# loop over categorical vars
for(i in 2:length(cat_vars)){
# var name as header
cat('####', cat_names[i], '\n')
# table of counts, by gender
pander(table(as$What.is.your.gender.,as[[cat_vars[i]]]))
# table of percentages, be gender
pander(100*prop.table(table(as$What.is.your.gender.,as[[cat_vars[i]]]),margin = 1))
# table of counts, by role
pander(table(as$What.is.your.role.,as[[cat_vars[i]]]))
# table of percentages, by role
pander(100*prop.table(table(as$What.is.your.role.,as[[cat_vars[i]]]),margin = 1))
}
# loop over qualitative vars
for(i in 1:length(comment_vars)){
cat('\n')
# var name as header
cat('###', comment_names[i], '\n')
# print the comment with separation
pander(paste((as[[comment_vars[i]]][as[[comment_vars[i]]]!=""]), collapse = "  ;   ,   ;  "))
cat('\n')
}
# loop over categorical variables
for(i in 2:length(cat_vars)){
# females, count
g <- as %>% filter(What.is.your.gender.=="Female") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.gender.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# males, count
g <- as %>% filter(What.is.your.gender.=="Male") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.gender.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# females, %
g <- as %>% filter(What.is.your.gender.=="Female") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.gender.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# males, %
g <- as %>% filter(What.is.your.gender.=="Male") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.gender.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.gender.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
}
# loop over categorical variables
for(i in 1:length(cat_vars)){
# academic, count
g <- as %>% filter(What.is.your.role.=="Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# tech, count
# g <- as %>% filter(What.is.your.role.=="Professional/Administrative/Technical staff") %>%
#   ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
#     geom_bar(aes(fill = factor(..x..)), stat="count") +
#     geom_text(aes( label = ..count..,
#                    y= ..count.. ), stat= "count", vjust = 1.5) +
#     labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
#     facet_grid(~What.is.your.role.) +
#   theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
# print(g)
# research, count
g <- as %>% filter(What.is.your.role.=="Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(fill = factor(..x..)), stat="count") +
geom_text(aes( label = ..count..,
y= ..count.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Count", fill = cat_vars[i]) +
facet_grid(~What.is.your.role.) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# academic, %
g <- as %>% filter(What.is.your.role.=="Academic staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
# tech, %
# g <- as %>% filter(What.is.your.role.=="Professional/Administrative/Technical staff") %>%
#   ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
#     geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
#     geom_text(aes( label = scales::percent(..prop..),
#                    y= ..prop.. ), stat= "count", vjust = 1.5) +
#     labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
#     facet_grid(~What.is.your.role.) +
#     scale_y_continuous(labels = scales::percent) +
#   theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
# print(g)
# research, %
g <- as %>% filter(What.is.your.role.=="Research staff") %>%
ggplot(aes_string(x = cat_vars[i], group="What.is.your.role.")) +
geom_bar(aes(y = ..prop.., fill = factor(..x..)), stat="count") +
geom_text(aes( label = scales::percent(..prop..),
y= ..prop.. ), stat= "count", vjust = 1.5) +
labs(x = cat_names[i], y = "Percent", fill = cat_vars[i]) +
facet_grid(~What.is.your.role.) +
scale_y_continuous(labels = scales::percent) +
theme(legend.position = "none", axis.text.x = element_text(angle = deg, hjust = 1))
print(g)
}
library(shiny); runApp('covid/coronaviz/mobileapp.R')
runApp('covid/coronaviz')
tests <- c(1784,6636,10000,17992,30213,42484)
dates <- c("09/03/2020", "17/03/2020", "23/03/2020", "30/03/2020", "06/04/2020")
dates <- as.Date(dates, format = "%d/%m/%Y")
df <- data.frame(dates, tests)
tests <- c(1784,6636,17992,30213,42484)
dates <- c("09/03/2020", "17/03/2020", "23/03/2020", "30/03/2020", "06/04/2020")
dates <- as.Date(dates, format = "%d/%m/%Y")
df <- data.frame(dates, tests)
ggplot2::ggplot(df, aes(dates, tests))+geom_smooth()
library(ggplot2)
ggplot(df, aes(dates, tests))+geom_smooth()
library(tidyverse)
diff(tests)
diff(dates)
diff(tests)/diff(dates)
diff(tests)/as.numeric(diff(dates))
shiny::runApp('covid/coronaviz')
runApp('covid/coronaviz')
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(leaflet)
library(DT)
rm(list=ls())
testing <- read.csv("data/corona_testing.csv")
dat <- read.csv("data/corona_ireland.csv")
testing <- read.csv("data/corona_testing.csv")  %>%
mutate(date = as.Date(date,format = "%d/%m/%Y"))
dat <- read.csv("data/corona_ireland.csv") %>%
mutate(date = as.Date(date,format = "%d/%m/%Y"))
dat %>% filter(area!= "north") %>% left_join(testing)
dat %>% filter(area!= "north") %>% left_join(testing) %>% mutate(pos_rate = ncase/tests)
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = ncase/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_line()
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = ncases/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_line()
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = 100*ncases/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_line() + labs(y="% of positive tests")
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = 100*ncases/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_smooth(se=FALSE) + labs(y="% of positive tests")
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing)
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = 100*ncases/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_smooth(se=FALSE) + labs(y="Estimated % of positive tests")
dat %>% filter(area!= "north") %>%
group_by(date) %>%
summarise(ncases = sum(ncase)) %>%
na.omit() %>%
left_join(testing) %>%
mutate(pos_rate = 100*ncases/tests) %>%
ggplot(aes(x=date,y=pos_rate)) + geom_line() + labs(y="Estimated % of positive tests")
runApp('covid/coronaviz')
?DTOutput
runApp('covid/coronaviz')
